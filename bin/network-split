#!/usr/bin/env python
"""
Example script how to use the subnet splitting classes.
"""

import sys,logging

from seine.script import prepare,initialize,error
from seine.address import IPv4Address,IPv6Address,SubnetPrefixIterator

parser = prepare(sys.argv)
(opts,args) = initialize(parser)
log = logging.getLogger('console')

if len(args) != 2:
    sys.exit(error(parser.get_usage()))

try:
    network = SubnetPrefixIterator(address=args[0],splitmask=args[1])
except ValueError,e:
    sys.exit(error(e))

for splitnet in network:
    if type(splitnet) == IPv4Address:
        print '%s/%s' % (splitnet.network,splitnet.bitmask) 
    elif type(splitnet) == IPv6Address:
        print splitnet.network

