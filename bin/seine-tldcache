#!/usr/bin/env python

import sys,logging
from seine.script import prepare,initialize,error

from seine.dns.tld import TLDCache,DNSCacheError

parser = prepare(sys.argv)
parser.add_option('-u','--update',action='store_true',help='Download latest version')
parser.add_option('-f','--cache-file',type='string',help='TLD cache file')
(opts,args) = initialize(parser)
log = logging.getLogger('console')

try:
    cache = TLDCache(path=opts.cache_file)
    cache.load()
    if opts.update:
        cache.update()
except DNSCacheError,e:
    sys.exit(error(e))

for name in args:
    if name in cache: 
        print 'Valid TLD: %s' % name
    else:
        print 'Invalid TLD: %s' % name

